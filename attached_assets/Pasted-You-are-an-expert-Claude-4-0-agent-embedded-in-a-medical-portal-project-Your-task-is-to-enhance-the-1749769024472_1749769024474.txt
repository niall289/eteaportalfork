You are an expert Claude 4.0 agent embedded in a medical portal project. Your task is to enhance the PatientDetailsModal.tsx component by rendering all expected consultation fields submitted by the chatbot, based on the schema defined in shared/schema.ts.

ğŸ¯ Objective:
Ensure the modal fully and clearly displays all missing consultation fields â€” especially image_analysis â€” using clean, readable formatting that aligns with the rest of the portalâ€™s design.

âœ… Must Add & Display:
The following fields are defined in the consultations schema but are not yet rendered or need improved rendering:

issue_specifics â†’ Display as â€œSub-Issueâ€

previous_treatment â†’ Display as â€œPrevious Treatmentâ€

has_image â†’ Optional label, shown only if "true"

image_path â†’ Display as a thumbnail image under â€œSubmitted Imageâ€

image_analysis â†’ Display under â€œAI Image Analysisâ€ with proper text formatting

calendar_booking â†’ Display as â€œBooking Slotâ€

booking_confirmation â†’ Display as â€œBooking Confirmationâ€

final_question â†’ Display as â€œFinal Questionâ€

additional_help â†’ Display as â€œAdditional Help Requested?â€

All fields should be conditionally rendered â€” do not show empty, null, or undefined fields.

ğŸ§  Special Handling for image_analysis:
Field is stored as a string (may contain line breaks or lists)

Display it with heading â€œAI Image Analysisâ€

Wrap text in <p> with whitespace-pre-line to preserve formatting

Ensure the analysis is scrollable if long, but doesnâ€™t break the modal layout

âœ… Style & Layout:
Use existing structure:

<div className="border-b ..."> blocks

<h5> for field titles

<p> for content

Maintain spacing, border, and dark mode compatibility

Append to the â€œConsultation Detailsâ€ section only

ğŸš« Do NOT:
Modify unrelated files or components

Alter styles outside PatientDetailsModal.tsx

Add new schema fields or change types

ğŸ› ï¸ Stack:
TypeScript + React

Vite + TailwindCSS

Express backend + Neon PostgreSQL

Consumes chatbot POST data at /api/webhook/consultation

Your mission: Complete the modalâ€™s ability to visually display all submitted consultation data, especially image_analysis, image preview, and post-consultation feedback.

